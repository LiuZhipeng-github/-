# 数据结构与算法之第三篇.栈和队列

## 1、 概述

栈和队列主要用于在计算过程中**保存临时数据的容器**。

### 1.1 栈、队列和数据使用顺序

栈和队列也是最简单的缓存结构，它们**只支持**数据项的**存储**和**访问**，不支持数据项之间任何关系。
\- 栈：后进先出（Last In First Out，LIFO）
\- 队列：先进先出（First In First Out，FIFO）
应该用**线性表**作为**栈**和**队列**的实现结构。
![这里写图片描述](%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B9%8B%E7%AC%AC%E4%BA%94%E7%AF%87.%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97.assets/SouthEast-20201130183721354)

### 1.2 应用环境

![这里写图片描述](%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B9%8B%E7%AC%AC%E4%BA%94%E7%AF%87.%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97.assets/SouthEast-20201130183721500)

## 2、 栈：概念和实现

栈（stack，也称堆栈）是一种容器，可存入数据元素、访问元素、删除元素等。存入栈中的元素之间相互没有任何具体关系，**只有到来的时间的先后顺序**。在这里没有元素的位置、元素的前后顺序等概念。

**栈**的**基本性质保证**，在**任何时刻**可以**访问、删除**的**元素**都是**在此之前最后存入**的那个**元素**。因此，**栈确定了**一种**默认元素访问顺序** ，访问时**无需其他信息**。

### 2.1 栈抽象数据类型

栈的抽象数据类型描述：
![这里写图片描述](%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B9%8B%E7%AC%AC%E4%BA%94%E7%AF%87.%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97.assets/SouthEast-20201130183721458)

### 2.2 **栈的线性表实现**

用**线性表**的技术**实现栈**时，操作**只**在**表的一端**进行，**不涉及另一端**，更**不涉及**表的**中间**部分。

对于顺序表，后端插入和删除是O(1)的操作，应该用这一端作为栈顶。
对于连接表，前端插入和删除都是O(1)的操作，应该使用这一端作为栈顶。

顺序表扩大存储需要做一次高代价操作；另外顺序表需要完整的的大块存储区。采用连接技术，在这两个问题上都有优势。链接实现的缺点是更多依赖于解释器的存储管理，每个节点的链接开销，以及链接节点在实际计算机内存中任意散布肯能带来的开销。
### 2.3 栈的顺序表（数组）实现


### 2.4 栈的链表实现


### 2.5 栈与递归

如果在一个定义了中（如python的函数）引用了被定义的对象（被定义的函数）本身，这种定义被称为递归。在递归定义或结构中，递归的部分必须比原来的整体简单，这样才有可能到达某种终节点（即递归的出口）。显然，这种终节点不能是递归的。在递归结构中，必须存在非递归的基本结构构成的成分。如果不是这样就会出现无限递归。例如，节点链的空连接就是递归的终点。

**栈与递归/函数调用**
在程序执行中，函数的嵌套调用是按“后调用先返回的”规则进行，这种规则符合栈的使用模式，因此可以用栈来实现。
函数调用的前序动作按顺序包括：
- 被调用函数的局部变量和形式参数分配存储区（称为函数帧/活动记录/数据区）
- 将所有实参和函数的返回地址存入函数帧（实参形参的结合/传值）
- 将控制转到被调用函数的入口。
函数调用的后序动作（函数返回时完成）是：
- 被调用函数的计算结果存入指定位置。
- 释放被调用函数的存储区（帧）
- 按以前保存的返回地址将控制转回调用函数。

##### **递归与非递归**
对于递归定义的函数，每个实际调用时执行的都是该函数体的代码，只是需要在一个内部运行栈里保存各次调用的局部信息。这种情况说明，完全有可能修改函数定义，把一个递归定义的函数改造为一个非递归函数
递归定义的阶乘函数，与之对应的非递归形式，用自己定义的栈模拟系统的运行栈。

##### **递归函数与非递归函数**
目前来说，函数调用损失的效率多半都可以接受，通常直接采用递归定义的函数就可以满足要求，不一定需要考虑非递归函数的定义。只有一些极为特殊的情况，由于效率要求特别高等原因，可能需要做这种工作。

### 2.6 栈在软件工程中的实际应用


## 3、 队列

队列（queue），也是一种容器，可存入、访问、删除元素。

### 3.1 队列抽象数据类型

**加图！！！！！**

### 3.2 队列的顺序表实现




### 3.3 队列的链表实现






### 3.4 队列的list实现

一个具体实现示例：基于Python的list实现顺序表示的队列。


### 3.5 队列类的实现


```
class SQueue():
    def __init__(self, init_len=8):
        self._len = init_len          # 存储区长度
        self._elems = [0]*init_len    # 元素存储
        self._head = 0                # 表头元素下标
        self._num = 0                 # 元素个数

    def is_empty(self):
        return self._num == 0

    def peek(self):
        if self._num == 0:
            raise QueueUnderflow
        return self._elems[self._head]

    def dequeue():
        if self._num == 0:
            raise QueueUnderflow
        e = self._elems[self._head]
        self._head = (self._head+1) % self.len
        self._num -= 1
        return e

    def enqueue(self, e):
        if self._num == self._len:
            self.__extend()
        self._elems[(self._head+self._num) % self._len] = e
        self._num += 1

    def __extend(self):
        old_len = self._len
        self._len *= 2
        new_elems = [0]*self._len
        for i in range(old_len):
            new_elems[i] = self._elems[(self._head+i)%old_len]
        self._elems, self._head = new_elems, 0  
```

### 3.6 队列在实际开发中的应用





